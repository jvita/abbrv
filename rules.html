<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FLLQ3HYQF0"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-FLLQ3HYQF0');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>abbrv: rules</title>

    <!-- Add Bootstrap for styling the navbar -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <link rel="stylesheet" href="/static/css/styles.css">

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <!-- for zipping files -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light" style="background-color:var(--background-color);">
        <a class="navbar-brand" href="index.html">abbrv</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link" href="writer.html">write</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="drafter.html">draft</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="rules.html">rules</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="help.html">help</a>
                </li>
                <!-- Systems Dropdown -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        system: select
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <div id="systemsList"></div>
                        <li><hr class="dropdown-divider" id="systemsDivider"></li>
                        <li><a class="dropdown-item" href="#" id="newSystem">New</a></li>
                        <li><a class="dropdown-item" href="#" id="deleteSystem">Delete</a></li>
                        <li><a class="dropdown-item" href="#" id="importSystem">Import</a></li>
                        <li><a class="dropdown-item" href="#" id="exportSystem">Export</a></li>
                        <li><a class="dropdown-item" href="#" id="openUploadModal" data-bs-toggle="modal"
                            data-bs-target="#uploadModal">Upload</a></li>
                    </ul>
                </li>
            </ul>
            <!-- Discord button aligned to the right -->
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="https://discord.com/invite/sK8VH4WzYM" target="_blank">
                        <i class="bi bi-discord"></i> Discord
                    </a>
                </li>
            </ul>
        </div>
        <!-- Modal for Uploading Files -->
        <div class="modal fade" id="uploadModal" tabindex="-1" aria-labelledby="uploadModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="uploadModalLabel">Upload your system</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>
                            System upload is currently only supported through Github.
                            This is to allow us to run automated validation checks to ensure that your uploaded files are safe and correctly formatted, and to provide ease-of-use commands to facilitate merging into the master branch.
                        </p>


                        <p>To upload a new system, please follow these steps: </p>
                        <ul>
                            <li><a href="https://gist.github.com/" target="_blank">Create a new GitHub Gist</a></li>
                            <ul>
                                <li>Drag-and-drop your <code>[glyphs, modes, rules, phrases].json</code> files.</li>
                                <li>Make sure they're uploaded as four separate files.</li>
                            </ul>
                            <li><a href="https://github.com/jvita/abbrv/issues/new?template=submit_upload.yml" target="_blank">Open a new issue</a> on the <b>abbrv</b> repo</li>
                            <ul>
                                <li>GitHub will post a comment with additional instructions.</li>
                            </ul>
                            <li>Add a comment to the issue with the command: <code>/submit [url_of_your_gist]</code></li>
                            <ul>
                                <li>This will automatically validate the files from your gist and open a new PR for merging your results.</li>
                            </ul>
                        </ul>

                        <p>If you do not have a Github account, contact <a href="https://www.reddit.com/user/jerrshv/">u/jerrshv</a> on Reddit for assistance.</p>

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal for downloading systems -->
        <div class="modal fade" id="downloadSystemsModal" tabindex="-1" aria-labelledby="downloadSystemsModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="downloadSystemsModalLabel">Available systems</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <ul id="downloadableList" class="list-group">
                        </ul>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>


    <!-- Add New Rule -->
    <h3>Rules</h3>
    <div>Rules can be used to modify text prior to translation into shorthand glyphs. They are applied using find-and-replace operations with <a href="https://regexone.com/" target="_blank">regular expressions</a>. If you don't want to learn how to write regular expressions (which can be a bit of a pain), try asking your friendly neighborhood LLM to write them for you! The site <a href="https://regex101.com/">regex101</a> can be useful for making sure that your regex is working properly.</div>
    <hr>
    <form id="addRuleForm" class="d-flex flex-row align-items-end">
        <div class="flex-grow-1 me-2">
            <label for="ruleName" class="form-label">
                Name
                <i class="bi bi-question-circle ms-2" style="font-size: 0.8rem;" data-bs-toggle="tooltip" title="A brief, easily understood description of the rule."></i>
            </label>
            <input type="text" class="form-control" id="ruleName" placeholder="Enter name of rule" required>
        </div>
        <div class="flex-grow-1 me-2">
            <label for="regexInput" class="form-label">
                Pattern
                <i class="bi bi-question-circle ms-2" style="font-size: 0.8rem;" data-bs-toggle="tooltip" title="The regular expression used for pattern matching."></i>
            </label>
            <input type="text" class="form-control" id="regexInput" placeholder="Enter regex pattern to be matched" required>
        </div>
        <div class="flex-grow-1 me-2">
            <label for="replacementText" class="form-label">
                Replacement
                <i class="bi bi-question-circle ms-2" style="font-size: 0.8rem;" data-bs-toggle="tooltip" title="The regular expression for replacing any matched patterns."></i>
            </label>
            <input type="text" class="form-control" id="replacementText" placeholder="Enter replacement text">
        </div>
        <div>
            <button type="submit" class="btn btn-primary" style="margin-bottom:2px">Add</button>
        </div>
    </form>

    <div class="mt-4 d-flex justify-content-around">
        Note: the arrow buttons can be used to re-order the list. Rules higher in the list will be applied first.
    </div>

    <!-- Rule List (placed at the bottom) -->
    <div class="mt-4">
        <ul id="rulesList" class="list-group">
            <!-- Rules will be dynamically added here -->
        </ul>
    </div>

<script src="static/js/index-scripts.js"></script>
<script src="static/js/rules-scripts.js"></script>

</body>
</html>